<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Auth Test Stable</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body{font-family:Arial;background:#f3f4f6;display:flex;justify-content:center;align-items:center;height:100vh}
.box{background:#fff;padding:30px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,.1);width:320px}
input{width:100%;padding:10px;margin-bottom:10px}
button{width:100%;padding:10px;background:#2563eb;color:#fff;border:0;border-radius:8px}
.status{margin-top:10px;font-size:14px}
</style>
</head>
<body>

<div class="box">
<h3>Login Test</h3>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<button onclick="logout()" style="margin-top:8px;background:#111827">Logout</button>
<div class="status" id="status">Checking session...</div>
</div>

<script>
const supa = supabase.createClient(
  "https://mxeqccecqkyllwvbylej.supabase.co",
  "sb_publishable_UWUWJaWHxVxZPnkm62sypQ_QU2pw2CR",
  { auth:{persistSession:true} }
);

async function checkSession(){
  const {data:{session}} = await supa.auth.getSession();
  if(session){
    status.innerText = "Logged in: " + session.user.email;
  }else{
    status.innerText = "Not logged in";
  }
}

async function login(){
  status.innerText = "Logging in...";
  const {error} = await supa.auth.signInWithPassword({
    email: email.value.trim(),
    password: password.value
  });
  if(error){
    status.innerText = "Error: " + error.message;
    return;
  }
  await checkSession();
}

async function logout(){
  await supa.auth.signOut();
  await checkSession();
}

checkSession();
</script>

</body>
</html>
